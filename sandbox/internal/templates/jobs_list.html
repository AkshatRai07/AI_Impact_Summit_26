{{define "content"}}
<!-- Hero Section -->
<div class="gradient-bg text-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">Find Your Dream Job</h1>
        <p class="text-xl text-blue-100 mb-8">Discover {{.TotalJobs}} opportunities from top companies</p>
        
        <!-- Search Bar -->
        <form action="/" method="GET" class="max-w-3xl mx-auto">
            <div class="flex flex-col md:flex-row gap-4">
                <div class="flex-1 relative">
                    <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    <input type="text" name="q" value="{{.Query}}" 
                           placeholder="Job title, skills, or company" 
                           class="w-full pl-12 pr-4 py-4 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-300 outline-none">
                </div>
                <button type="submit" class="bg-secondary hover:bg-blue-900 px-8 py-4 rounded-lg font-semibold transition">
                    Search Jobs
                </button>
            </div>
        </form>

        <!-- Quick Filters -->
        <div class="flex flex-wrap justify-center gap-3 mt-6">
            <a href="/?type=internship" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-full text-sm transition {{if eq .JobType "internship"}}ring-2 ring-white{{end}}">
                <i class="fas fa-graduation-cap mr-1"></i> Internships
            </a>
            <a href="/?type=full-time" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-full text-sm transition {{if eq .JobType "full-time"}}ring-2 ring-white{{end}}">
                <i class="fas fa-briefcase mr-1"></i> Full-Time
            </a>
            <a href="/?remote=true" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-full text-sm transition {{if .RemoteOnly}}ring-2 ring-white{{end}}">
                <i class="fas fa-home mr-1"></i> Remote Only
            </a>
            <a href="/" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-full text-sm transition">
                <i class="fas fa-times mr-1"></i> Clear Filters
            </a>
        </div>
    </div>
</div>

<!-- Stats Bar -->
<div class="bg-white border-b">
    <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8">
        <div class="flex flex-wrap justify-between items-center gap-4">
            <div class="text-gray-600">
                Showing <span class="font-semibold text-gray-900">{{len .Jobs}}</span> of 
                <span class="font-semibold text-gray-900">{{.TotalJobs}}</span> jobs
                {{if .Query}}<span class="text-primary"> for "{{.Query}}"</span>{{end}}
            </div>
            <div class="flex items-center space-x-4 text-sm text-gray-500">
                <span><i class="fas fa-building mr-1"></i> {{.UniqueCompanies}} Companies</span>
                <span><i class="fas fa-map-marker-alt mr-1"></i> Multiple Locations</span>
            </div>
        </div>
    </div>
</div>

<!-- Job Listings -->
<div class="max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
    <div class="grid gap-4">
        {{range .Jobs}}
        <div class="job-card bg-white rounded-xl border hover:border-primary/30 p-6 card-hover transition-all duration-200">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                <div class="flex items-start space-x-4">
                    <!-- Company Logo Placeholder -->
                    <div class="w-14 h-14 bg-linear-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold text-lg shrink-0">
                        {{slice .Company 0 1}}
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center gap-2 flex-wrap">
                            <a href="/jobs/{{.ID}}" class="text-lg font-semibold text-gray-900 hover:text-primary transition">
                                {{.Title}}
                            </a>
                            {{if or .IsRemote .Remote}}
                            <span class="px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full font-medium">
                                <i class="fas fa-home mr-1"></i>Remote
                            </span>
                            {{end}}
                            {{if eq .JobType "internship"}}
                            <span class="px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full font-medium">
                                Internship
                            </span>
                            {{end}}
                        </div>
                        <div class="text-gray-600 mt-1">{{.Company}}</div>
                        <div class="flex flex-wrap items-center gap-3 mt-2 text-sm text-gray-500">
                            <span><i class="fas fa-map-marker-alt mr-1"></i>{{.Location}}</span>
                            {{if .Salary}}
                            <span><i class="fas fa-dollar-sign mr-1"></i>{{.Salary}}</span>
                            {{end}}
                            {{if gt .ExperienceRequired 0}}
                            <span><i class="fas fa-clock mr-1"></i>{{.ExperienceRequired}}+ years</span>
                            {{else}}
                            <span><i class="fas fa-seedling mr-1"></i>Entry Level</span>
                            {{end}}
                        </div>
                    </div>
                </div>
                <div class="flex items-center gap-3 md:shrink-0">
                    <a href="/jobs/{{.ID}}" 
                       class="px-4 py-2 border border-gray-300 text-gray-700 hover:border-primary hover:text-primary rounded-lg font-medium transition">
                        View Details
                    </a>
                    <a href="/jobs/{{.ID}}/apply" 
                       class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-lg font-medium transition">
                        Apply Now
                    </a>
                </div>
            </div>
            
            <!-- Requirements Preview -->
            {{if .Requirements}}
            <div class="mt-4 pt-4 border-t">
                <div class="flex flex-wrap gap-2">
                    {{range $i, $req := .Requirements}}
                    {{if lt $i 4}}
                    <span class="px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded-full">{{$req}}</span>
                    {{end}}
                    {{end}}
                    {{if gt (len .Requirements) 4}}
                    <span class="px-3 py-1 bg-gray-100 text-gray-500 text-sm rounded-full">+{{minus (len .Requirements) 4}} more</span>
                    {{end}}
                </div>
            </div>
            {{end}}
        </div>
        {{else}}
        <div class="text-center py-16">
            <div class="text-6xl mb-4">üîç</div>
            <h3 class="text-xl font-semibold text-gray-900 mb-2">No jobs found</h3>
            <p class="text-gray-600 mb-4">Try adjusting your search or filters</p>
            <a href="/" class="text-primary hover:underline">View all jobs</a>
        </div>
        {{end}}
    </div>
</div>
{{end}}
